<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Find a Pet - PetPair</title>
  <link rel="stylesheet" href="findpet.css" />
</head>
<body>
  <nav class="navbar">
    <div class="navbar-brand">PetPair</div>
    <input type="checkbox" id="toggle" class="navbar-toggle" />
    <label for="toggle" class="hamburger">&#9776;</label>
    <ul class="navbar-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="petform.html">Find a Pet</a></li>
      <li><a href="pets.html">Pets</a></li>
      <li><a href="admin.html">Admin</a></li>
      <li><a href="profile.html">Profile</a></li>
      <li id="auth-link"><a href="login.html">Login</a></li>
    </ul>
  </nav>

  <main>
    <div class="find-pet-container">
      <h2>Find Your Perfect Pet</h2>
      <form id="findPetForm" class="find-pet-form">
        <h3>Lifestyle Information</h3>

        <!-- all original inputs remain unchanged -->

        <label for="space">Living Space:
          <select id="space" name="space" required>
            <option value="">-- Select --</option>
            <option value="apartment">Apartment</option>
            <option value="house">House</option>
          </select>
        </label>

        <label for="activity">Activity Level:
          <select id="activity" name="activity" required>
            <option value="">-- Select --</option>
            <option value="sedentary">Sedentary</option>
            <option value="moderate">Moderate</option>
            <option value="active">Active</option>
          </select>
        </label>

        <label for="salary">Monthly Income (INR):
          <input type="number" id="salary" name="salary" min="0" placeholder="e.g., 30000" required />
        </label>

        <label for="kids">Do you have kids at home?
          <select id="kids" name="kids" required>
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </label>

        <label for="otherPets">Do you have other pets?
          <select id="otherPets" name="otherPets" required>
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </label>

        <label for="timeAvailable">Hours per day you can spend with a pet:
          <select id="timeAvailable" name="timeAvailable" required>
            <option value="">-- Select --</option>
            <option value="less_than_2">Less than 2</option>
            <option value="2_to_4">2 to 4</option>
            <option value="5_or_more">5 or more</option>
          </select>
        </label>

        <label for="groomingEffort">Preferred grooming effort:
          <select id="groomingEffort" name="groomingEffort" required>
            <option value="">-- Select --</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </label>

        <label for="outdoorAccess">Do you have yard/outdoor access?
          <select id="outdoorAccess" name="outdoorAccess" required>
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </label>

        <h3>Pet Preferences</h3>

        <label for="type">Pet Type:
          <select id="type" name="type" required>
            <option value="">-- Select --</option>
            <option value="dog">Dog</option>
            <option value="cat">Cat</option>
            <option value="rabbit">Rabbit</option>
          </select>
        </label>

        <label for="size">Size:
          <select id="size" name="size" required>
            <option value="">-- Select --</option>
            <option value="small">Small</option>
            <option value="medium">Medium</option>
            <option value="large">Large</option>
          </select>
        </label>

        <label for="age">Preferred Pet Age:
          <select id="age" name="age" required>
            <option value="">-- Select --</option>
            <option value="baby">Baby</option>
            <option value="adult">Adult</option>
            <option value="senior">Senior</option>
          </select>
        </label>

        <label for="energy">Energy Level:
          <select id="energy" name="energy" required>
            <option value="">-- Select --</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </label>

        <label for="grooming">Grooming Needs:
          <select id="grooming" name="grooming" required>
            <option value="">-- Select --</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </label>

        <label for="trainability">Trainability:
          <select id="trainability" name="trainability" required>
            <option value="">-- Select --</option>
            <option value="easy">Easy to train</option>
            <option value="average">Average</option>
            <option value="difficult">Difficult</option>
          </select>
        </label>

        <label for="temperament">Temperament:
          <select id="temperament" name="temperament" required>
            <option value="">-- Select --</option>
            <option value="calm">Calm</option>
            <option value="playful">Playful</option>
            <option value="protective">Protective</option>
          </select>
        </label>

        <button type="submit">Find Pets</button>
      </form>

     
      <div id="suggestionBox" style="margin-top: 20px;"></div>
    </div>
  </main>

  <footer class="footer-container">
    <div class="footer-links">
      <a href="index.html">Home</a>
      <a href="petform.html">Find a Pet</a>
      <a href="admin.html">Admin</a>
      <a href="profile.html">Profile</a>
      <a href="contact.html">Contact Us</a>
    </div>
    <p>Â© 2025 PetPair. All rights reserved.</p>
  </footer>

  <script>
    document.getElementById('findPetForm').addEventListener('submit', async function(event) {
      event.preventDefault();
     
       const formData = {
      type: document.getElementById('type').value,
    size: document.getElementById('size').value,
    energy: document.getElementById('energy').value,
    grooming: document.getElementById('grooming').value,
    space: document.getElementById('space').value,
    kids: document.getElementById('kids').value,
    otherPets: document.getElementById('otherPets').value,
    activity: document.getElementById('activity').value,
    salary: document.getElementById('salary').value,
    age: document.getElementById('age').value,
    timeAvailable: document.getElementById('timeAvailable').value,
    groomingEffort: document.getElementById('groomingEffort').value,
    outdoorAccess: document.getElementById('outdoorAccess').value,
    trainability: document.getElementById('trainability').value,
    temperament: document.getElementById('temperament').value
    };
   
    try {
      const response = await fetch("http://localhost:5000/api/suggest-pet", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(formData)
      });

      const data = await response.json();
      if (response.ok) {
          document.getElementById('suggestionBox').innerHTML =
      `<h4  style="text-align:center;" >Suggested Pet Types:</h4>
      <ul style="display:inline-block; text-align:left; padding-left:20px;">
    ${data.suggestions.map(pet => `<li>${pet}</li>`).join('')}
  </ul>`;
      
      } else {
        alert(data.message || "Something went wrong");
      }
    } catch (err) {
      console.error("Error:", err);
      alert("Server error");
    }
    
  
  });
  

    const authLinkLi = document.getElementById('auth-link');
    function updateAuthLink() {
      const user = JSON.parse(localStorage.getItem('user'));
      if (user) {
        authLinkLi.innerHTML = '<a href="#" id="logoutLink">Logout</a>';
        document.getElementById('logoutLink').addEventListener('click', () => {
          localStorage.removeItem('user');
          alert('Logged out successfully.');
          window.location.href = 'index.html';
        });
      } else {
        authLinkLi.innerHTML = '<a href="login.html">Login</a>';
      }
    }
    updateAuthLink();
  </script>
</body>
</html>
